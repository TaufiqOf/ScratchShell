<ui:ContentDialog
    x:Class="ScratchShell.Views.Dialog.SyncConflictDialog"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    Title="Sync Conflict Detected"
    CloseButtonText="Cancel"
    DefaultButton="Primary"
    PrimaryButtonText="Use Local"
    SecondaryButtonText="Use Server">

    <StackPanel Width="500" Margin="20">
        <ui:SymbolIcon
            Margin="0,0,0,16"
            HorizontalAlignment="Center"
            FontSize="32"
            Foreground="{DynamicResource SystemFillColorCautionBrush}"
            Symbol="Warning24" />

        <TextBlock
            Margin="0,0,0,12"
            HorizontalAlignment="Center"
            FontSize="18"
            FontWeight="SemiBold"
            Text="Settings Sync Conflict" />

        <TextBlock
            Margin="0,0,0,20"
            Opacity="0.8"
            TextWrapping="Wrap">
            Your local settings and cloud settings have conflicting changes. Please choose which version to keep:
        </TextBlock>

        <Grid Margin="0,0,0,20">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="20" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <!--  Local Settings  -->
            <Border
                Grid.Column="0"
                Padding="12"
                Background="{DynamicResource ControlFillColorDefaultBrush}"
                CornerRadius="6">
                <StackPanel>
                    <TextBlock
                        Margin="0,0,0,8"
                        FontWeight="SemiBold"
                        Text="Local Settings" />

                    <TextBlock
                        FontSize="12"
                        Opacity="0.7"
                        Text="Theme:" />
                    <TextBlock Margin="0,0,0,4" Text="{Binding LocalSettings.CurrentTheme}" />

                    <TextBlock
                        FontSize="12"
                        Opacity="0.7"
                        Text="Shell Type:" />
                    <TextBlock Margin="0,0,0,4" Text="{Binding LocalSettings.DefaultShellType}" />

                    <TextBlock
                        FontSize="12"
                        Opacity="0.7"
                        Text="Last Modified:" />
                    <TextBlock Margin="0,0,0,4" Text="{Binding ClientLastSynced, StringFormat='{}{0:g}'}" />

                    <TextBlock
                        FontSize="12"
                        Opacity="0.7"
                        Text="Device:" />
                    <TextBlock Text="{Binding LocalSettings.DeviceName}" />
                </StackPanel>
            </Border>

            <!--  VS Icon  -->
            <ui:SymbolIcon
                Grid.Column="1"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                FontSize="20"
                Opacity="0.6"
                Symbol="ArrowSync24" />

            <!--  Server Settings  -->
            <Border
                Grid.Column="2"
                Padding="12"
                Background="{DynamicResource ControlFillColorDefaultBrush}"
                CornerRadius="6">
                <StackPanel>
                    <TextBlock
                        Margin="0,0,0,8"
                        FontWeight="SemiBold"
                        Text="Cloud Settings" />

                    <TextBlock
                        FontSize="12"
                        Opacity="0.7"
                        Text="Theme:" />
                    <TextBlock Margin="0,0,0,4" Text="{Binding ServerSettings.CurrentTheme}" />

                    <TextBlock
                        FontSize="12"
                        Opacity="0.7"
                        Text="Shell Type:" />
                    <TextBlock Margin="0,0,0,4" Text="{Binding ServerSettings.DefaultShellType}" />

                    <TextBlock
                        FontSize="12"
                        Opacity="0.7"
                        Text="Last Modified:" />
                    <TextBlock Margin="0,0,0,4" Text="{Binding ServerLastSynced, StringFormat='{}{0:g}'}" />

                    <TextBlock
                        FontSize="12"
                        Opacity="0.7"
                        Text="Device:" />
                    <TextBlock Text="{Binding ServerSettings.DeviceName}" />
                </StackPanel>
            </Border>
        </Grid>

        <ui:InfoBar
            Title="Important"
            IsClosable="False"
            IsOpen="True"
            Message="Choosing one option will overwrite the other. Make sure you select the version with the settings you want to keep."
            Severity="Warning" />
    </StackPanel>
</ui:ContentDialog>