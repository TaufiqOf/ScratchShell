<UserControl
    x:Class="ScratchShell.UserControls.ThemeControl.TerminalPreviewControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:ScratchShell.UserControls.ThemeControl"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    d:DesignHeight="200"
    d:DesignWidth="400"
    mc:Ignorable="d">

    <UserControl.Resources>
        <local:ColorToBrushConverter x:Key="ColorToBrushConverter" />
    </UserControl.Resources>

    <Border
        x:Name="MainBorder"
        Padding="12"
        Background="{Binding Theme.Background, RelativeSource={RelativeSource AncestorType=UserControl}}"
        BorderBrush="#404040"
        BorderThickness="1"
        CornerRadius="6">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <!--  Terminal Title Bar  -->
            <Border
                Grid.Row="0"
                Margin="0,0,0,4"
                Padding="8,4"
                Background="#2D2D2D"
                CornerRadius="4,4,0,0">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <!--  Window Controls  -->
                    <StackPanel Grid.Column="0" Orientation="Horizontal">
                        <Ellipse
                            Width="12"
                            Height="12"
                            Margin="0,0,4,0"
                            Fill="#FF5F56" />
                        <Ellipse
                            Width="12"
                            Height="12"
                            Margin="0,0,4,0"
                            Fill="#FFBD2E" />
                        <Ellipse
                            Width="12"
                            Height="12"
                            Fill="#27CA3F" />
                    </StackPanel>

                    <!--  Terminal Title  -->
                    <TextBlock
                        Grid.Column="1"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        FontSize="11"
                        Foreground="#CCCCCC"
                        Text="Terminal Preview" />
                </Grid>
            </Border>

            <!--  Terminal Content  -->

            <StackPanel
                x:Name="TerminalContent"
                Grid.Row="1"
                Background="{Binding Theme.Background, RelativeSource={RelativeSource AncestorType=UserControl}}">

                <!--  Command Line 1: Basic text "  -->
                <StackPanel Margin="0,2" Orientation="Horizontal">
                    <TextBlock
                        x:Name="Prompt1"
                        FontFamily="{Binding Theme.FontFamily, RelativeSource={RelativeSource AncestorType=UserControl}}"
                        FontSize="{Binding Theme.FontSize, RelativeSource={RelativeSource AncestorType=UserControl}}"
                        Foreground="{Binding Theme.Foreground, RelativeSource={RelativeSource AncestorType=UserControl}}"
                        Text="user@terminal:~$ " />
                    <TextBlock
                        x:Name="Command1"
                        FontFamily="{Binding Theme.FontFamily, RelativeSource={RelativeSource AncestorType=UserControl}}"
                        FontSize="{Binding Theme.FontSize, RelativeSource={RelativeSource AncestorType=UserControl}}"
                        Foreground="{Binding Theme.Foreground, RelativeSource={RelativeSource AncestorType=UserControl}}"
                        Text="ls -la" />
                </StackPanel>

                <!--  Output with different elements  -->
                <TextBlock
                    x:Name="Output1"
                    Margin="0,1"
                    FontFamily="{Binding Theme.FontFamily, RelativeSource={RelativeSource AncestorType=UserControl}}"
                    FontSize="{Binding Theme.FontSize, RelativeSource={RelativeSource AncestorType=UserControl}}"
                    Foreground="{Binding Theme.Foreground, RelativeSource={RelativeSource AncestorType=UserControl}}"
                    Text="total 24" />

                <!--  Command Line 3: With cursor simulation  -->
                <StackPanel Margin="0,2" Orientation="Horizontal">
                    <TextBlock
                        x:Name="Prompt3"
                        FontFamily="{Binding Theme.FontFamily, RelativeSource={RelativeSource AncestorType=UserControl}}"
                        FontSize="{Binding Theme.FontSize, RelativeSource={RelativeSource AncestorType=UserControl}}"
                        Foreground="{Binding Theme.Foreground, RelativeSource={RelativeSource AncestorType=UserControl}}"
                        Text="user@terminal:~$ " />
                    <TextBlock
                        x:Name="Command3"
                        FontFamily="{Binding Theme.FontFamily, RelativeSource={RelativeSource AncestorType=UserControl}}"
                        FontSize="{Binding Theme.FontSize, RelativeSource={RelativeSource AncestorType=UserControl}}"
                        Foreground="{Binding Theme.Foreground, RelativeSource={RelativeSource AncestorType=UserControl}}"
                        Text="cat file.txt" />
                </StackPanel>

                <!--  Copy highlight demonstration  -->
                <StackPanel Margin="0,2" Orientation="Horizontal">
                    <TextBlock
                        x:Name="Prompt4"
                        FontFamily="{Binding Theme.FontFamily, RelativeSource={RelativeSource AncestorType=UserControl}}"
                        FontSize="{Binding Theme.FontSize, RelativeSource={RelativeSource AncestorType=UserControl}}"
                        Foreground="{Binding Theme.Foreground, RelativeSource={RelativeSource AncestorType=UserControl}}"
                        Text="user@terminal:~$ " />
                    <Border
                        x:Name="CopyHighlightDemo"
                        Padding="2,0"
                        CornerRadius="2">
                        <TextBlock
                            x:Name="CopiedText"
                            FontFamily="{Binding Theme.FontFamily, RelativeSource={RelativeSource AncestorType=UserControl}}"
                            FontSize="{Binding Theme.FontSize, RelativeSource={RelativeSource AncestorType=UserControl}}"
                            Foreground="{Binding Theme.Foreground, RelativeSource={RelativeSource AncestorType=UserControl}}"
                            Text="ScratchShell" />
                    </Border>
                </StackPanel>



                <!--  Current prompt line  -->
                <StackPanel Margin="0,4,0,0" Orientation="Horizontal">
                    <TextBlock
                        x:Name="CurrentPrompt"
                        FontFamily="{Binding Theme.FontFamily, RelativeSource={RelativeSource AncestorType=UserControl}}"
                        FontSize="{Binding Theme.FontSize, RelativeSource={RelativeSource AncestorType=UserControl}}"
                        Foreground="{Binding Theme.Foreground, RelativeSource={RelativeSource AncestorType=UserControl}}"
                        Text="user@terminal:~$ " />
                    <Border
                        x:Name="LiveCursor"
                        Width="8"
                        Height="16"
                        Background="{Binding Theme.CursorColor, RelativeSource={RelativeSource AncestorType=UserControl}}">
                        <Border.Style>
                            <Style TargetType="Border">
                                <Style.Triggers>
                                    <EventTrigger RoutedEvent="Loaded">
                                        <BeginStoryboard>
                                            <Storyboard RepeatBehavior="Forever">
                                                <DoubleAnimation
                                                    AutoReverse="True"
                                                    Storyboard.TargetProperty="Opacity"
                                                    From="1"
                                                    To="0.3"
                                                    Duration="0:0:1" />
                                            </Storyboard>
                                        </BeginStoryboard>
                                    </EventTrigger>
                                </Style.Triggers>
                            </Style>
                        </Border.Style>
                    </Border>
                </StackPanel>
            </StackPanel>
        </Grid>
    </Border>
</UserControl>